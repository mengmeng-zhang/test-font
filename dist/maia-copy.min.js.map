{"version":3,"sources":["webpack://createCopy/webpack/universalModuleDefinition","webpack://createCopy/webpack/bootstrap","webpack://createCopy/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://createCopy/./node_modules/@babel/runtime/helpers/typeof.js","webpack://createCopy/./src/config/index.js","webpack://createCopy/./src/directive/index.js","webpack://createCopy/./src/utils/index.js"],"names":["config","FORBID_URL","module","exports","require","dynamicLoad","checkObj","isPromise","gtransfer","listener","getListener","oaCount","appKey","options","window","createCopyListener","getGtransfer","lis","connect","then","transfer","catch","msg","console","log","updateWater","el","binding","vnode","text","value","gtrans","update","unicodes","transform","innerHTML","initCopy","fn","url","beforeSearch","beforeHash","beforePathName","onUrlChange","popstate","document","documentMode","hashstate","addEventListener","checkUrl","search","location","hash","pathName","pathname","createCopy","Vue","router","flag","gtransferInit","prototype","$copy","directive","bind","res","componentUpdated","Config","callback","_header","getElementsByTagName","script","createElement","setAttribute","appendChild","onload","readyState","onreadystatechange","obj","Object","toString","call","formatText","reg","textSplit","split","map","item","test","join"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA,wC;;;;;;;;;;;ACNA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;;;;;;;;;AChBA,MAAMA,MAAM,GAAG;AACXC,cAAU,EAAE;AADD,GAAf;AAIAC,QAAM,CAACC,OAAP,GAAiBH,MAAjB;;;;;;;;;;;;;;;;;;;;iBCJ6CI,mBAAO,CAAC,4CAAD,C;MAA5CC,W,YAAAA,W;MAAaC,Q,YAAAA,Q;MAAUC,S,YAAAA,S,EAC/B;;;AACA,MAAIC,SAAJ;AACA,MAAIC,QAAJ;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAASC,OAAT,EAAkBC,MAAlB,EAA0BC,OAA1B,EAAkC;AAClD,QAAGJ,QAAH,EAAY;AACR,aAAOA,QAAP;AACH;;AACD,QAAGK,MAAM,CAACC,kBAAV,EAA6B;AACzB,aAAOD,MAAM,CAACC,kBAAP,CAA0BJ,OAA1B,EAAmCC,MAAnC,EAA2CC,OAA3C,CAAP;AACH;;AACD,WAAO,IAAP;AACH,GARD;AAUA;AACA;AACA;AACA;AACA;;;AACA,MAAMG,YAAY,GAAG,SAAfA,YAAe,CAASL,OAAT,EAAkBC,MAAlB,EAA0BC,OAA1B,EAAkC;AACnD,QAAGL,SAAH,EAAa;AACT,aAAOA,SAAP;AACH,KAHkD,CAInD;;;AACA,QAAMS,GAAG,GAAGP,WAAW,CAACC,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAAvB;;AACA,QAAGI,GAAH,EAAO;AACHA,SAAG,CAACC,OAAJ,GAAcC,IAAd,CAAmB,UAASC,QAAT,EAAkB;AACjCZ,iBAAS,GAAGY,QAAZ;AACH,OAFD,EAEGC,KAFH,CAES,UAACC,GAAD,EAAS;AACdC,eAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,eAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,OALD;AAMA,aAAOb,QAAP;AACH;AACJ,GAfD;AAiBA;AACA;AACA;AACA;AACA;;;AACA,MAAMgB,WAAW,GAAG,SAAdA,WAAc,CAAUC,EAAV,EAAcC,OAAd,EAAuBC,KAAvB,EAA8BjB,OAA9B,EAAuCC,MAAvC,EAA+CC,OAA/C,EAAuD;AACvE,QAAMgB,IAAI,GAAGF,OAAO,CAACG,KAArB;AACA,QAAMC,MAAM,GAAGf,YAAY,CAACL,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAA3B,CAFuE,CAGvE;AACA;AACA;AACA;AACA;AACA;AACA;;AACI,QAAGkB,MAAM,IAAI,sBAAOA,MAAP,KAAiB,QAA9B,EAAuC;AACnCA,YAAM,CAACC,MAAP;AACA,UAAIC,QAAQ,GAAGF,MAAM,CAACG,SAAP,CAAiBL,IAAjB,CAAf;AACAH,QAAE,CAACS,SAAH,GAAeF,QAAf;AACH,KAdkE,CAevE;;AACH,GAhBD;AAkBA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMG,QAAQ,GAAG,SAAXA,QAAW,CAAUzB,OAAV,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoCwB,EAApC,EAAuC;AACpD5B,YAAQ,GAAGC,WAAW,CAACC,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAAtB;AACAJ,YAAQ,CAACS,OAAT,GAAmBC,IAAnB,CAAwB,UAASC,QAAT,EAAkB;AACtCZ,eAAS,GAAGY,QAAZ;AACAiB,QAAE,IAAIA,EAAE,CAAC7B,SAAD,CAAR;AACH,KAHD,EAGGa,KAHH,CAGS,UAACC,GAAD,EAAS;AACdC,aAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,aAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAND;AAOA,WAAOb,QAAP;AACH,GAVD;;AAWA,MAAM6B,GAAG,GAAG;AACRC,gBAAY,EAAE,EADN;AAERC,cAAU,EAAE,EAFJ;AAGRC,kBAAc,EAAE;AAHR,GAAZ;;AAKA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAU/B,OAAV,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAmC;AACnD,QAAM8B,QAAQ,GAAI,gBAAgB7B,MAAjB,KAA8B,OAAO8B,QAAQ,CAACC,YAAhB,KAAiC,WAAlC,IAAkDD,QAAQ,CAACC,YAAT,GAAwB,CAAvG,CAAjB;AACA,QAAMC,SAAS,GAAI,kBAAkBhC,MAAnB,KAAgC,OAAO8B,QAAQ,CAACC,YAAhB,KAAiC,WAAlC,IAAkDD,QAAQ,CAACC,YAAT,GAAwB,CAAzG,CAAlB;;AACA,QAAGF,QAAH,EAAY;AACR7B,YAAM,CAACiC,gBAAP,CAAwB,UAAxB,EAAoC,YAAU;AAC1CC,gBAAQ,CAACrC,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAAR;AACH,OAFD,EADQ,CAIR;AACH;;AACD,QAAGiC,SAAH,EAAc;AACVhC,YAAM,CAACiC,gBAAP,CAAwB,YAAxB,EAAsC,YAAU;AAC5CC,gBAAQ,CAACrC,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAAR;AACH,OAFD,EADU,CAIV;AACH;AACJ,GAfD;;AAgBA,MAAMmC,QAAQ,GAAG,SAAXA,QAAW,CAAUrC,OAAV,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAmC;AAChD,QAAMoC,MAAM,GAAGnC,MAAM,CAACoC,QAAP,CAAgBD,MAA/B;AACA,QAAME,IAAI,GAAGrC,MAAM,CAACoC,QAAP,CAAgBC,IAA7B;AACA,QAAMC,QAAQ,GAAGtC,MAAM,CAACoC,QAAP,CAAgBG,QAAjC;;AACA,QAAGf,GAAG,CAACE,UAAJ,KAAmBW,IAAnB,IAA2Bb,GAAG,CAACC,YAAJ,KAAqBU,MAAhD,IAA0DX,GAAG,CAACG,cAAJ,KAAuBW,QAApF,EAA6F;AACzFd,SAAG,CAACC,YAAJ,GAAmBU,MAAnB;AACAX,SAAG,CAACE,UAAJ,GAAiBW,IAAjB;AACAb,SAAG,CAACG,cAAJ,GAAqBW,QAArB;AACA,UAAMrB,MAAM,GAAGf,YAAY,CAACL,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAA3B;;AAEA,UAAGkB,MAAM,IAAI,sBAAOA,MAAP,KAAiB,QAA9B,EAAuC;AACnCA,cAAM,CAACC,MAAP;AACH;AACJ;AACJ,GAdD;;AAgBA,MAAIsB,UAAU,GAAI,YAAU;AACxB,WAAO,UAAU3C,OAAV,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoC0C,GAApC,EAAyCC,MAAzC,EAAiDC,IAAjD,EAAsD;AACzD,UAAI,CAAC9C,OAAD,IAAY,CAACC,MAAjB,EAAwB;AACpBW,eAAO,CAACC,GAAR,CAAY,mBAAZ;AACA;AACH;;AACD,UAAG,CAAClB,QAAQ,CAACO,OAAD,CAAZ,EAAsB;AAClBA,eAAO,GAAG,EAAV;AACH;;AACD,UAAG4C,IAAH,EAAQ;AACJjD,iBAAS,GAAG,IAAZ;AACAC,gBAAQ,GAAG,IAAX;AACH;;AACD,UAAIiD,aAAa,GAAGtB,QAAQ,CAACzB,OAAD,EAAUC,MAAV,EAAkBC,OAAlB,CAA5B;AACA0C,SAAG,CAACI,SAAJ,CAAcC,KAAd,GAAsBF,aAAtB;AAEAH,SAAG,CAACM,SAAJ,CAAc,WAAd,EAA2B;AACvBC,YADuB,gBAClBpC,EADkB,EACdC,OADc,EACN;AACb,cAAME,IAAI,GAAGF,OAAO,CAACG,KAArB;AACA4B,uBAAa,CAACxC,OAAd,GAAwBC,IAAxB,CAA6B,UAAC4C,GAAD,EAAS;AAClC;AACA,gBAAM9B,QAAQ,GAAG8B,GAAG,CAAC7B,SAAJ,CAAcL,IAAd,CAAjB;AACAH,cAAE,CAACS,SAAH,GAAeF,QAAf;AACH,WAJD;AAKH,SARsB;AASvB+B,wBATuB,4BASNtC,EATM,EASFC,OATE,EASOC,KATP,EAScjB,OATd,EASuBC,MATvB,EAS+BC,OAT/B,EASuC;AAC1DY,qBAAW,CAACC,EAAD,EAAKC,OAAL,EAAcC,KAAd,EAAqBjB,OAArB,EAA8BC,MAA9B,EAAsCC,OAAtC,CAAX;AACH;AAXsB,OAA3B,EAfyD,CA4BzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAvCD;AAwCH,GAzCgB,EAAjB;;AA2CAX,QAAM,CAACC,OAAP,GAAiBmD,UAAjB;;;;;;;;;;;;;;;;;;;;ACjKA,MAAMW,MAAM,GAAG7D,mBAAO,CAAC,8CAAD,CAAtB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAU6D,QAAV,EAAmB;AACnC,QAAMC,OAAO,GAAGvB,QAAQ,CAACwB,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAhB;AACA,QAAIC,MAAM,GAAGzB,QAAQ,CAAC0B,aAAT,CAAuB,QAAvB,CAAb;AACAD,UAAM,CAACE,YAAP,CAAoB,MAApB,EAA4B,iBAA5B;AACAF,UAAM,CAACE,YAAP,CAAoB,KAApB,EAA2BN,MAAM,CAAChE,UAAlC;;AACAkE,WAAO,CAACK,WAAR,CAAoBH,MAApB;;AACAA,UAAM,CAACI,MAAP,GAAgB,YAAU;AACtB,UAAG,CAAC,KAAKC,UAAN,IAAoB,KAAKA,UAAL,IAAmB,QAAvC,IAAmD,KAAKA,UAAL,IAAmB,UAAzE,EAAoF;AAChFR,gBAAQ,IAAIA,QAAQ,EAApB;AACH;;AACDG,YAAM,CAACI,MAAP,GAAgBJ,MAAM,CAACM,kBAAP,GAA4B,IAA5C;AACH,KALD;AAMH,GAZD;;AAcA,MAAMrE,QAAQ,GAAG,SAAXA,QAAW,CAAUsE,GAAV,EAAe;AAC5B,WAAOC,MAAM,CAAClB,SAAP,CAAiBmB,QAAjB,CAA0BC,IAA1B,CAA+BH,GAA/B,KAAuC,iBAA9C;AACH,GAFD;;AAGA,MAAMrE,SAAS,GAAI,SAAbA,SAAa,CAAUqE,GAAV,EAAe;AAC9B,WAAO,CAAC,CAACA,GAAF,KAAU,sBAAOA,GAAP,MAAe,QAAf,IAA2B,OAAOA,GAAP,KAAe,UAApD,KAAmE,OAAOA,GAAG,CAACzD,IAAX,KAAoB,UAA9F;AACH,GAFD;;AAGA,MAAM6D,UAAU,GAAG,SAAbA,UAAa,CAAUnD,IAAV,EAAe;AAC9B,QAAMoD,GAAG,GAAG,cAAZ;AACA,QAAMC,SAAS,GAAGrD,IAAI,CAACsD,KAAL,CAAW,KAAX,CAAlB;AACA,WAAOD,SAAS,CAACE,GAAV,CAAc,UAAUC,IAAV,EAAe;AAChC9D,aAAO,CAACC,GAAR,CAAYyD,GAAG,CAACK,IAAJ,CAASD,IAAT,CAAZ;;AACA,UAAG,CAACJ,GAAG,CAACK,IAAJ,CAASD,IAAT,CAAJ,EAAmB;AACf,eAAO,QAAQA,IAAR,GAAe,GAAtB;AACH;;AACD,aAAOA,IAAP;AACH,KANM,EAMJE,IANI,CAMC,EAND,CAAP;AAOH,GAVD;;AAYArF,QAAM,CAACC,OAAP,GAAiB;AACbG,YAAQ,EAARA,QADa;AAEbD,eAAW,EAAXA,WAFa;AAGbE,aAAS,EAATA;AAHa,GAAjB","file":"maia-copy.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"createCopy\"] = factory();\n\telse\n\t\troot[\"createCopy\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/directive/index.js\");\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","const config = {\n    FORBID_URL: '/js/forbid-copy.min.js'\n}\n\nmodule.exports = config","const { dynamicLoad, checkObj, isPromise } = require('../utils/index')\r\n// const router = require('../router/index')\r\nvar gtransfer\r\nvar listener \r\n/**\r\n * 获取字体变化实例，单例模式\r\n * @param {*} oaCount \r\n * @param {*} appKey \r\n */\r\nconst getListener = function(oaCount, appKey, options){\r\n    if(listener){\r\n        return listener\r\n    }\r\n    if(window.createCopyListener){\r\n        return window.createCopyListener(oaCount, appKey, options)\r\n    }\r\n    return null\r\n}\r\n\r\n/**\r\n * 获取更新函数，单例模式\r\n * @param {*} oaCount \r\n * @param {*} appKey \r\n */\r\nconst getGtransfer = function(oaCount, appKey, options){\r\n    if(gtransfer){\r\n        return gtransfer\r\n    }\r\n    // 防止调用失败，如果不存在gtransfer,则再生成一个\r\n    const lis = getListener(oaCount, appKey, options)\r\n    if(lis){\r\n        lis.connect().then(function(transfer){\r\n            gtransfer = transfer\r\n        }).catch((msg) => {\r\n            console.log('报错了')\r\n            console.log(msg)\r\n        })\r\n        return listener\r\n    }\r\n}\r\n\r\n/**\r\n * 数据更新后更新water\r\n * @param {*} el \r\n * @param {*} binding \r\n */\r\nconst updateWater = function (el, binding, vnode, oaCount, appKey, options){\r\n    const text = binding.value\r\n    const gtrans = getGtransfer(oaCount, appKey, options)\r\n    // if(isPromise(gtrans)){\r\n    //     gtrans.then(g => {\r\n    //         g.update()\r\n    //         var unicodes = g.transform(text)\r\n    //         el.innerHTML = unicodes \r\n    //     })\r\n    // }else{\r\n        if(gtrans && typeof gtrans == 'object'){\r\n            gtrans.update()\r\n            var unicodes = gtrans.transform(text)\r\n            el.innerHTML = unicodes\r\n        }\r\n    // }\r\n}\r\n\r\n/**\r\n * 初始化指令\r\n * @param {*} oaCount \r\n * @param {*} appKey \r\n * @param {*} options \r\n */\r\nconst initCopy = function (oaCount, appKey, options, fn){\r\n    listener = getListener(oaCount, appKey, options)\r\n    listener.connect().then(function(transfer){\r\n        gtransfer = transfer\r\n        fn && fn(gtransfer)\r\n    }).catch((msg) => {\r\n        console.log('报错了')\r\n        console.log(msg)\r\n    })\r\n    return listener\r\n}\r\nconst url = {\r\n    beforeSearch: '',\r\n    beforeHash: '',\r\n    beforePathName: ''\r\n}\r\nconst onUrlChange = function (oaCount, appKey, options){\r\n    const popstate = ('onpopstate' in window) && ((typeof document.documentMode === 'undefined') || document.documentMode < 8)\r\n    const hashstate = ('onhashchange' in window) && ((typeof document.documentMode === 'undefined') || document.documentMode < 8)\r\n    if(popstate){\r\n        window.addEventListener('popstate', function(){\r\n            checkUrl(oaCount, appKey, options)\r\n        })\r\n        // window.onpopstate = checkUrl\r\n    }\r\n    if(hashstate) {\r\n        window.addEventListener('hashchange', function(){\r\n            checkUrl(oaCount, appKey, options)\r\n        })\r\n        // window.onhashchange = checkUrl\r\n    }\r\n}\r\nconst checkUrl = function (oaCount, appKey, options){\r\n    const search = window.location.search\r\n    const hash = window.location.hash\r\n    const pathName = window.location.pathname\r\n    if(url.beforeHash !== hash || url.beforeSearch !== search || url.beforePathName !== pathName){\r\n        url.beforeSearch = search\r\n        url.beforeHash = hash\r\n        url.beforePathName = pathName\r\n        const gtrans = getGtransfer(oaCount, appKey, options)\r\n\r\n        if(gtrans && typeof gtrans == 'object'){\r\n            gtrans.update()\r\n        }\r\n    }\r\n}\r\n\r\nlet createCopy = (function(){\r\n    return function (oaCount, appKey, options, Vue, router, flag){\r\n        if (!oaCount || !appKey){\r\n            console.log('请传入oaCount,appKey')\r\n            return\r\n        }\r\n        if(!checkObj(options)){\r\n            options = {}\r\n        }\r\n        if(flag){\r\n            gtransfer = null\r\n            listener = null \r\n        }\r\n        let gtransferInit = initCopy(oaCount, appKey, options)\r\n        Vue.prototype.$copy = gtransferInit\r\n\r\n        Vue.directive('maia-copy', {\r\n            bind(el, binding){\r\n                const text = binding.value\r\n                gtransferInit.connect().then((res) => {\r\n                    // res.update()\r\n                    const unicodes = res.transform(text)\r\n                    el.innerHTML = unicodes\r\n                })\r\n            },\r\n            componentUpdated(el, binding, vnode, oaCount, appKey, options){\r\n                updateWater(el, binding, vnode, oaCount, appKey, options)\r\n            },\r\n        })\r\n        // onUrlChange(oaCount, appKey, options)\r\n        // if(router){\r\n        //     router.beforeEach((to, from, next) => {\r\n        //         if(gtransferInit && gtransferInit.update){\r\n        //             gtransferInit.update()\r\n        //             next()\r\n        //         }else{\r\n        //             next()\r\n        //         }\r\n        //     })\r\n        // }\r\n    }\r\n})()\r\n\r\nmodule.exports = createCopy \r\n","const Config = require('../config/index')\n\nconst dynamicLoad = function (callback){\n    const _header = document.getElementsByTagName('head')[0]\n    let script = document.createElement('script')\n    script.setAttribute('type', 'text/javascript')\n    script.setAttribute('src', Config.FORBID_URL)\n    _header.appendChild(script)\n    script.onload = function(){\n        if(!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete'){\n            callback && callback()\n        }\n        script.onload = script.onreadystatechange = null\n    }\n}\n\nconst checkObj = function (obj) {\n    return Object.prototype.toString.call(obj) == '[object Object]'\n}\nconst isPromise =  function (obj) {\n    return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\nconst formatText = function (text){\n    const reg = /<\\/?.+?\\/?>/g\n    const textSplit = text.split('&#x')\n    return textSplit.map(function (item){\n        console.log(reg.test(item))\n        if(!reg.test(item)){\n            return '\\\\u' + item + ';'\n        }\n        return item\n    }).join('')\n}\n\nmodule.exports = {\n    checkObj,\n    dynamicLoad,\n    isPromise \n}\n"],"sourceRoot":""}